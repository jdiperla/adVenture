<html>
	<head>
		<script type="text/javascript" src="http://padawin.github.io/Butterfly-js/js/Butterfly.js"></script>
		<script type="text/javascript" src="stories/test.js"></script>
		<script type="text/javascript" src="js/engine.min.js"></script>
	</head>
	<body>
		<div id="screen"></div>
		<form id="controls">
			<input type="text" id="choice" />
			<input type="submit" value="Send action" />
			<select id="select-world">
				<option value="">Select story</option>
			</select>
		</form>
		<script type="text/javascript">
			B.addEvent(window,'load',function(){
				var select=B.$id('select-world'),
					screen=B.$id('screen'),
					choice=B.$id('choice'),
					nbStories=stories.length;

				for (var s=0; s<nbStories; s++) {
					B.create(
						'option',
						{'value': s, 'text': stories[s].title},
						select
					);
				}

				B.addEvent(select,'change',function(){
					screen.innerHTML = '';
					choice.value='';
					choice.focus();
					if (select.selectedIndex == 0) return;

					engine(
						stories[select.selectedIndex-1]['content'],
						screen,
						B.$id('choice'),
						B.$id('controls')
					);
				});


			});

		</script>
	</body>
</html>
